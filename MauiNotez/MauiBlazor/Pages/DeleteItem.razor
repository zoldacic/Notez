@using Syncfusion.Blazor.Popups
@using TodoSQLite.Data;
@using TodoSQLite.Models;

<SfDialog Width="250px" IsModal="true" Visible="true">
    <DialogTemplates>
        <Content> 

            Do you want to delete item with name "@item.Name"?

            <DialogButtons>
                <DialogButton Content="Save" IsPrimary="true" OnClick="@Submit" />
                <DialogButton Content="Cancel" OnClick="@Cancel" />
            </DialogButtons>
        </Content>
    </DialogTemplates>
</SfDialog>

@code {
    [Parameter] 
    public TodoItem item { get; set; } = new TodoItem();

    [Parameter]
    public EventCallback OnItemDeleted { get; set; }

    [Parameter]
    public EventCallback OnItemDeleteCancelled { get; set; }

    async Task Submit() { 

        var repo = new TodoItemRepository();

        await repo.DeleteItemAsync(item);

        await OnItemDeleted.InvokeAsync();
    }
    
    private async Task Cancel()
    {
        await OnItemDeleteCancelled.InvokeAsync();
    }
}

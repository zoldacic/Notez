@using MauiBlazor.Data;
@using Syncfusion.Blazor.Inputs;
@using Syncfusion.Blazor.Popups;
@using TodoSQLite.Data;
@using TodoSQLite.Models;

<SfDialog Width="250px" IsModal="true" Visible="true">
    <DialogTemplates>
        <Content> 

            <SfTextBox @bind-Value="@tag.Text" CssClass="e-outline" Placeholder="Name" FloatLabelType="@FloatLabelType.Always"></SfTextBox>

            <DialogButtons>
                <DialogButton Content="Save" IsPrimary="true" OnClick="@Submit" />
                <DialogButton Content="Cancel" OnClick="@Cancel" />
            </DialogButtons>
        </Content>
    </DialogTemplates>
</SfDialog>

@code {    

    [Parameter] 
    public Tag tag { get; set; } = new Tag();

    [Parameter]
    public EventCallback OnTagSaved { get; set; }

    [Parameter]
    public EventCallback OnTagSaveCancelled { get; set; }    

    async Task Submit() { 

        var repo = new TagRepository();

        await repo.SaveTagAsync(tag);
        await OnTagSaved.InvokeAsync();
    }

    private async Task Cancel()
    {
        await OnTagSaveCancelled.InvokeAsync();
    }
}